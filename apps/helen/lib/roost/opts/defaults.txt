# start of roost config

base
  syntax_vsn '2020-08-18'
  timeout PT1M
  timezone 'America/New_York'

workers
  disco_ball    'roost disco ball'
  el_wire       'roost el wire'
  el_wire_entry 'roost el wire entry'
  lights_one    'roost lights sound one'
  lights_three  'roost lights sound three'
  led_forest    'roost led forest'

cmd_definitions
  dance_fade
    name 'roost dance fade'
    random
      min 128
      max 2048
      primes 35
      step_ms 55
      step 13
      priority 7

  closed_fade
    name 'roost closed fade'
    random
      min 64
      max 768
      primes 35
      step_ms 55
      step 7
      priority 7

modes
  all_stop
    next_mode hold
    sequence all_stop
    steps
      all_stop
        all off

  dance_with_me
    sequence spin_up slow_disco_ball dance
    next_mode hold
    steps
      spin_up
        led_forest dance_fade
        disco_ball duty 0.7
        el_wire duty 0.5
        el_wire_entry duty 0.5
        lights_one on
        lights_three on

      slow_disco_ball
        sleep PT1M
        disco_ball duty 0.63

      dance
        sleep PT1M

  leaving
    sequence house_lights_only exiting
    next_mode closed
    steps
      house_lights_only
        off disco_ball el_wire lights_one lights_three
        on led_forest el_wire_entry

      exiting
        sleep PT10M

  closed
    sequence closed
    next_mode hold
    steps
      closed
        all off
        led_forest closed_fade

# end of roost config
