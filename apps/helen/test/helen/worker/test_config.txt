# start of test config

base {
  syntax_vsn "2020-0817"
  description "test configuration"
  timeout PT3M
  timezone "America/New_York"
  first_mode alpha
}

workers { air "mixtank air"; pump "mixtank pump" }

command cmd_alpha "fade1" random {
  min 128, max 2048, primes 35, step_ms 55, step 13, priority 7
}

mode all_stop {
  next_mode hold
  sequence at_start, finally

  step at_start { all off }
  step finally { all off }
}

mode alpha {
  next_mode beta
  sequence at_start, middle, finally

  step at_start for PT1S { air on for PT0.1S then off }

  step middle for PT1S {
    air on for PT0.1S then off
    air on for PT0.1S then off
    punp off
  }

  step finally { air off; pump off}
}

mode beta {
  sequence step1, step2, repeat

  step step1 { sleep PT0.1S }
  step step2 { sleep PT0.1S }
}

mode gamma {
  next_mode hold
  sequence step1, step2

  step step1 { sleep PT0.1S }
  step step2 { sleep PT0.1S }
}

# end of config
